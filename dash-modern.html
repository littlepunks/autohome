<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <title>Autohome - Modern Dash</title>

  <!-- External libraries -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script> <!-- Include Socket.io -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@1.0.1"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="/css/styles.css">

  <!-- Project scripts -->
  <script type="module" src="/js/dashboard.js"></script>
  <script type="module" src="/js/chart.js"></script>
  <script type="module" src="/js/ui-handlers.js"></script>
</head>

<body>
  <ul class="menu" id="menubar">
    <li><a onclick="handleItemClick('homeCanvas')">Home</a></li>
    
    <li class="dropdown">
      <a class="dropbtn">View</a>
      <div class="dropdown-content">
        <a onclick="handleItemClick('graphCanvas')">Live Temp Graph</a>
        <a onclick="handleItemClick('switchesCanvas')">Switches</a>
        <a onclick="handleItemClick('weatherCanvas')">Weather</a>
        <a onclick="handleItemClick('weatherHistoryCanvas')">Temp History Graphs</a>
      </div>
    </li>

    <li class="dropdown">
      <a class="dropbtn">Services</a>
      <div class="dropdown-content">
        <a onclick="handleItemClick('powerCanvas')">Power</a>
        <a onclick="handleItemClick('Activity')">Activity</a>
      </div>
    </li>
  
    <li>
      <a id="Dev">Settings</a>
      <div class="dropdown-content">
        <a onclick="handleItemClick('Grid Code')">Grid Code</a>
        <a onclick="handleItemClick('Toggle Grid')">Toggle Grid</a>
        <a onclick="handleItemClick('Show All Items')">Show All Items</a>
      </div>
    </li>
    <li><div id="connection-status">
        <div id="tooltip"><span style="color: lightgreen">Green</span> is good<br><span style="color: orangered">Red</span> is a problem</div>

    </div></li>
  </ul>

  <div class="canvas-container">
    <canvas id="homeCanvas" width="150" height="754"></canvas>
    <canvas id="graphCanvas" width="150" height="754"></canvas>
    <canvas id="switchesCanvas" width="150" height="754"></canvas>
    <canvas id="weatherCanvas" width="150" height="754"></canvas>
    <canvas id="weatherHistoryCanvas" width="150" height="754"></canvas>
    <canvas id="powerCanvas" width="150" height="754"></canvas>
    <div id="activityLogContainer" style="display:none; width:100%; height:754px; overflow-y:auto; background:black; color:white; font-family:monospace; font-size:14px; padding:10px; box-sizing:border-box;">
      <div id="activityLog" style="width:100%;"></div>
    </div>
  </div>

  <div id="contextMenu" class="context-menu">
    <ul>
        <li onclick="handleContextMenuClick('Hide')">Hide</li>
        <li onclick="handleContextMenuClick('Something')">Something</li>
        <li onclick="handleContextMenuClick('Else')">Else</li>
    </ul>
  </div>

<!-- Setup some event handlers then good to go -->  
<script>

const myDiv = document.getElementById("connection-status");
const tooltip = document.getElementById("tooltip");

myDiv.addEventListener("mouseenter", () => {
    tooltip.style.display = "block";
});
myDiv.addEventListener("mouseleave", () => {
    tooltip.style.display = "none";
});

document.body.addEventListener("mouseover", (event) => {
   const dropdown = event.target.closest(".dropdown");
   if (dropdown) {
      dropdown.querySelector(".dropdown-content").style.display = "block";
   }
});

document.body.addEventListener("mouseover", (event) => {
   const dropdown = event.target.closest(".dropdown");
   if (dropdown) {
      dropdown.querySelector(".dropdown-content").style.display = "block";
   }
});

document.body.addEventListener("mouseout", (event) => {
   const dropdown = event.target.closest(".dropdown");
   if (dropdown) {
      dropdown.querySelector(".dropdown-content").style.display = "none";
   }
});

</script>
</body></html>
